# Environment configuration for ZentraQMS Backend
# Copy this file to .env and update the values for your environment

# Django Configuration
SECRET_KEY=django-insecure-change-me-in-production-very-long-and-secure-key
DEBUG=True
DJANGO_ENVIRONMENT=development
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# Database Configuration
DB_NAME=zentraqms_db
DB_USER=postgres
DB_PASSWORD=password
DB_HOST=localhost
DB_PORT=5432
TEST_DB_NAME=test_zentraqms_db

# Redis Configuration (for cache and Celery)
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Email Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@zentraqms.com

# CORS Configuration (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173

# Security Configuration (production only)
SECURE_SSL_REDIRECT=False
SECURE_HSTS_SECONDS=0
CSRF_COOKIE_SECURE=False
SESSION_COOKIE_SECURE=False

# Admin Configuration
ADMIN_URL=admin/

# Health Check Configuration
HEALTH_CHECK_PATH=/health/

# Logging Configuration
LOG_LEVEL=INFO
LOG_TO_FILE=True

# File Upload Configuration
MAX_UPLOAD_SIZE=5242880  # 5MB in bytes
ALLOWED_FILE_EXTENSIONS=.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif

# Advanced Upload Configuration
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880  # 5MB - archivos más grandes van a disco
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760  # 10MB máximo en memoria
FILE_UPLOAD_PERMISSIONS=0o644
FILE_UPLOAD_DIRECTORY_PERMISSIONS=0o755

# Auto Cleanup Configuration
AUTO_CLEANUP_ENABLED=True
AUTO_CLEANUP_TEMP_FILES_DAYS=7
AUTO_CLEANUP_IMPORT_FILES_DAYS=30

# Storage Monitoring (production)
STORAGE_ALERT_THRESHOLD_GB=80
STORAGE_CLEANUP_THRESHOLD_GB=100
STORAGE_ALERT_EMAILS=admin@zentraqms.com,ops@zentraqms.com

# API Configuration
API_RATE_LIMIT=1000/hour
API_PAGINATION_SIZE=20

# Celery Configuration
CELERY_TIMEZONE=America/Bogota
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

# Development Tools (development only)
ENABLE_DEBUG_TOOLBAR=True
ENABLE_DJANGO_EXTENSIONS=True

# Monitoring (production only)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Cloud Storage (production only, if using AWS S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=
USE_S3_STORAGE=False

# Database Connection Pool (production)
DB_CONN_MAX_AGE=60
DB_CONN_HEALTH_CHECKS=True

# Cache Configuration
CACHE_TIMEOUT=300  # 5 minutes default
CACHE_KEY_PREFIX=zentraqms

# Session Configuration
SESSION_COOKIE_AGE=3600  # 1 hour
SESSION_EXPIRE_AT_BROWSER_CLOSE=True

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL_CHARS=True
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=30  # minutes

# API Versioning
API_VERSION=v1
API_DEFAULT_VERSION=v1

# Internationalization
LANGUAGE_CODE=es-co
TIME_ZONE=America/Bogota
USE_I18N=True
USE_TZ=True

# Static and Media Files
STATIC_URL=/static/
MEDIA_URL=/media/
STATIC_ROOT=staticfiles/
MEDIA_ROOT=media/

# Content Security Policy (production)
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data:
CSP_FONT_SRC='self'

# Rate Limiting
RATELIMIT_ENABLE=True
RATELIMIT_USE_CACHE=True

# Backup Configuration (if using automated backups)
BACKUP_LOCAL_DIRECTORY=/var/backups/zentraqms
BACKUP_S3_BUCKET=zentraqms-backups
BACKUP_RETENTION_DAYS=30